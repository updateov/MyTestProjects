<?xml version="1.0" encoding="utf-8"?>
<settings xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <sections>
    <!-- THE SETTINGS BELOW THIS LINE ARE NORMALLY MODIFIED -->
    <section level="0" name="Startup">
      <setting key="ProcessAllTasks" value="True" info="" type="boolean" />
      <setting key="ManagePeriAuthWCFService" value="True" info="" type="boolean" />
      <setting key="ManageUsersData" value="True" info="" type="boolean" />
      <setting key="TCPIPPort" value="2506" minVal="1024" maxVal="49152" info="net.tcp port (must be identical to the same key in PeriAuthProxy)" type="integer" />
      <setting key="StartupDelayInterval" value="200" minVal="0" maxVal="10000" info="The timer interval during startup, in milliseconds" type="integer" />
      <setting key="PeriAuthConnectionString" value="Data Source=[SQL_SERVICE_NAME];Initial Catalog=PeriAuthDB;Persist Security Info=True;User ID=patient_record;Password=patient_record" info="Parameter for connection to the SQL database." type="string" />
      <setting key="SiteDB" value="PeriAuthDB" info="For NIEC use SiteDB value, for SSO use PeriAuthDB value" type="string" />
      <setting key="AuditDB" value="PeriAuthDB" info="For NIEC use AuditDB value, for SSO use PeriAuthDB value" type="string" />
    </section>
    <section level="1" name="General">
      <setting key="AllowDifferentIPAddressesPerClientMachine" value="1" minVal="0" maxVal="1" info="Determines whether to allow an application to subscribe if its IP address is different from the address of an already subscribed application on the same client machine. Default: Yes" type="integer" />
      <setting key="EventLoggingInterval" value="5" minVal="1" maxVal="30" info="Determines the minimum interval (in minutes) between logging of repeating error messages to the event log.  Default: 5." type="integer" />
      <setting key="SSOHeartbeatInterval" value="1000" minVal="200" maxVal="20000" info="Sets the time interval (in milliseconds) between heartbeat messages sent from client applications to the PeriAuth service. Default: 1000" type="integer" />
      <setting key="RefreshRate" value="500" minVal="100" maxVal="20000" info="Sets the time interval (in milliseconds) that PeriAuth waits between cycles of processing its timer based tasks. Default: 500" type="integer" />
      <setting key="AppStatesSerializeRate" value="5" minVal="1" maxVal="60000" info="Sets the time interval (in seconds) that PeriAuth waits between saving application states. Default: 5" type="integer" />
      <setting key="HeartbeatSaveRate" value="60" minVal="1" maxVal="60000" info="Sets the time interval (in seconds) that PeriAuth waits between saving heartbeat times to database. Default: 60 (HeartbeatSaveRate value must be bigger than HeartbeatTimeout value)" type="integer" />
      <setting key="UserSerializeRate" value="600" minVal="1" maxVal="60000" info="Sets the time interval (in seconds) that PeriAuth waits between saving user data. Default: 600" type="integer" />
      <setting key="MaxTaskBusyTime" value="1000" minVal="200" maxVal="20000" info="Sets the maximum number of milliseconds a PeriAuth time-dependent task is busy before PeriAuth considers it as frozen and logs an error event. Default: 1000" type="integer" />
      <setting key="MaxPeriodWithNoDSN" value="60" minVal="10" maxVal="6000" info="Determines the maximum period of time (in minutes) that PeriAuth will continue to retry if it cannot access the DSN file. When this period has passed, PeriAuth service will stop (and eventually will be restarted by SCM).  Default: 60" type="integer" />
      <setting key="MaxInactiveStateRetentionTime" value="30" minVal="10" maxVal="20000" info="Sets the maximum number of seconds that the state of an inactive application is kept in the database before it is deleted. Default: 30" type="integer" />
      <setting key="HeartbeatTimeout" value="30" minVal="1" maxVal="3600" info="Defines the maximum length of time (in seconds) allowed between heartbeat messages from client applications to the PeriAuth service. If the service detects that this time has passed, the client application is considered inactive. Default: 30" type="integer" />
      <setting key="RequestTimeout" value="60" minVal="1" maxVal="3600" info="Defines the maximum length of time (in seconds) allowed for a client application to perform an action (login / logoff) requested by the PeriAuth service. If the service detects that this time has passed, the client application is considered inactive. Default: 60" type="integer" />
      <setting key="UserDataCleanupPeriod" value ="7" minVal="1" maxVal="99999" info="Number of days to check for cleanup update limit" type="integer" />
      <setting key="UserDataCleanupUpdateLimit" value ="180" minVal="0" maxVal="99999" info="A user not used during this number of days and does not belong to any AD group will be cleared from the sql database" type="integer" />      
    </section>
    <section level="2" name="Modes">
      <setting key="AuthenticationMode" value="ACTIVE_DIRECTORY" info="Defines the authentication source that PeriAuth uses. ActiveDirectory mode authenticate in Active Directory. PeriCalmPlus mode authenticate in PeriBirth database. Default: ActiveDirectory" type="AuthenticationMode" />
      <setting key="SSOMode" value="NONE" info="Defines the SSO source that PeriAuth uses. PeriCALM Plus for NIEC mode with PeriBirth or XML File drop for SSO with Epic" type="SSOMode" />
      <setting key="PatientContextMode" value="NONE" info="Patient context mode. Use 'NONE' when there is no patient context integration. If using 'REST' mode make sure to have a valid url for the RESTServiceURL field." type="PatientContextMode" />
    </section>
    <section level="3" name="Active Directory">
      <setting key="ActiveDirectoryHostName" value="192.168.173.63" info="The Active Directory server host name or IP address." type="string" />
      <setting key="ActiveDirectoryDomain" value="shrek.com" info="The Active Directory domain name. e.g. Perigen.com." type="string" />
      <setting key="ActiveDirectoryOUGroups" value="PeriCalmGroups" info="The Active Directory domain root node Organizational Unit that includes PeriCalm groups. E.g. PeriCalmGroups." type="string" />
      <setting key="ActiveDirectoryOUsUsers" value="PeriCalmUsers" info="The Active Directory domain root node Organizational Units that includes PeriCalm users. E.g. PeriCalmUsers;PeriCalmGroups." type="string" />
      <setting key="ADUserSearchMethod" value="UPN_FIRST" info="" type="UserSearchMethod" />      
      <setting key="ActiveDirectoryUserName" value="administrator" info="The logon name of the user that can query the Active Directory." type="string" />
      <setting key="ActiveDirectoryPassword" value="Volume99" info="The password of the user that can query the Active Directory." type="string" />
      <setting key="ActiveDirectoryIsAliveCheck" value="60" minVal="1" maxVal="99999" info="Sets the time interval(in seconds) between checks of Active Directory connectivity. Default: 60" type="integer" />      
    </section>
    <section level="4" name="SSO External File Drop">
      <setting key="SSOEncryptionKey" value="xxxxx" type="string" info="Used to encrypt specific elements of the files dropped between PeriCALM and the external information system. Both parties should use the same key"/>
      <setting key="IVLength" value="8" minVal="0" maxVal="1000" type="integer" info="Used to encrypt specific elements of the files dropped between PeriCALM and the external information system. Both parties should use the same value"/>
      <setting key="FileDropExpiredTime" value="60" minVal="1" maxVal="1000" type="integer" info="PeriAuth will ignore incoming files older than this value in seconds"/>
      <setting key="FilesTimeoutInterval" value="60" minVal="6" maxVal="1000" type="integer" info="If an outbound dropped file is not processed (deleted) by the external system, PeriAuth will retry to drop it after this value in seconds"/>
      <setting key="FileDropRootFolderPath" value="C:\Program Files (x86)\Epic\v7.9\Shared Files" type="string" info="Full path of shared root folder"/>
      <setting key="FileDropInboundFolderName" value="EPICToPeriGen" type="string" info="Subfolder name for inbound file drops. Under this folder there will be a Domain subfolder and over there subfolders for each workstation. Leave blank for Unidirectional Inbound."/>
      <setting key="FileDropOutboundFolderName" value="PeriGenToEPIC" type="string" info="Subfolder name for outbound file drops. Under this folder there will be a Domain subfolder and over there subfolders for each workstation. Leave blank for Unidirectional Outbound."/>
      <setting key="IgnoreLogoffInterval" value="2" minVal="1" maxVal="60" type="integer" info="time in seconds to ignore logoff event after receiving a timeout event"/>
      <setting key="ImplicitLoginEnabled" value="TRUE" info="Allow processing inbound login, unlock events without authenticating the user/password in Active Directory, requiring the user to be a member of one of the  Active Directory PeriCALM groups for user permissions. Default: True." type="boolean" />
    </section>
    <section level="5" name="REST Web Service">
      <setting key="RESTServiceURL" value="http://localhost:7820/PeriAuth/" info="Valid url is mandatory for PatientContextMode'REST'." type="String" />
    </section>
  </sections>
  
  <valueDataTypeEnums>
    <enum name="AuthenticationMode">
      <enumVal value="INVALID" />
      <enumVal value="PERICALM_PLUS" />
      <enumVal value="ACTIVE_DIRECTORY" />
    </enum>
    <enum name="SSOMode">
      <enumVal value="NONE" />
      <enumVal value="PERICALM_PLUS" />
      <enumVal value="XML_FILE_DROP" />
    </enum>
    <enum name="PatientContextMode">
      <enumVal value="NONE" />      
      <enumVal value="PERICALM_PLUS" />
      <enumVal value="XML_FILE_DROP" />
      <enumVal value="REST" />
    </enum>
    <enum name="UserSearchMethod">
      <enumVal value="SAM_FIRST" />
      <enumVal value="UPN_FIRST" />
    </enum>
  </valueDataTypeEnums>
</settings>